name: bluez
version: 5.37-2
type: app
summary: Bluetooth tools and daemons
description: |
 This package contains tools and system daemons for using Bluetooth
 devices. BlueZ is the official Linux Bluetooth protocol stack. It
 is an Open Source project distributed under GNU General Public
 License (GPL). See the project homepage for more details:
 https://code.launchpad.net/~snappy-hwe-team/snappy-hwe-snaps/+git/bluez
confinement: strict

apps:
  bluetoothctl:
    command: usr/bin/bluetoothctl
    plugs: [client]
    aliases:
      - bluetoothctl
  obexctl:
    command: usr/bin/obexctl
    plugs: [client]
    aliases:
      - obexctl
  bluez:
    command: "usr/lib/bluetooth/bluetoothd -E"
    daemon: simple
    slots: [service]
  obex:
    command: "usr/lib/bluetooth/obexd"
    daemon: simple
    slots: [service]

plugs:
  client:
      interface: bluez
slots:
  service:
      interface: bluez

parts:
  bluez:
    plugin: autotools
    source: https://git.launchpad.net/~snappy-hwe-team/snappy-hwe-snaps/+git/bluez
    source-type: git
    source-branch: bluez/5.37
    configflags:
      - --prefix=/usr
      - --libexec=/usr/lib/
      - --enable-experimental
      - --enable-threads
      - --disable-cups
      - --disable-monitor
      - --enable-obex
      - --disable-systemd
      - --disable-silent-rules
    build-packages:
      - libglib2.0-dev
      - libdbus-1-dev
      - libical-dev
      - libreadline6-dev
      - libudev-dev
      - udev
      - pkg-config
    stage-packages:
      - libical1a
    filesets:
      libical1a:
        - usr/lib/*/libical*
    snap:
      - usr/lib/bluetooth/bluetoothd
      - usr/lib/bluetooth/obexd
      - usr/bin/bluetoothctl
      - usr/bin/obexctl
      - usr/share/doc/libical1a/copyright
      - $libical1a
  dbus-configuration:
    plugin: copy
    files:
      copyright: usr/share/doc/bluez/copyright
      doc/overview.md: usr/share/doc/bluez/overview.md
